<%- include('../partials/admin/header.ejs') %>

<%- include('../partials/admin/nav.ejs') %>

<% function useComma(price) { %>
    <% return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') %>
  <% } %>

<h2>Welcome to Administrator Control Room</h2>


<% if(products.length < 1) { %>
    <section class="text-center">
        <p>No Product Have Been Added</p>
        <a href="/admin/create">Create Product</a>
    </section>
<% } else { %>
    <main class="container-fluid homePage">
        <div class="row">
          <% for(let i = 0; i < products.length;  i++) { %>
          <div class="col-md-4">
            <div class="card homeCard" style="width:350px">
              <img class="card-img-top" src="<%= products[i].productImage %>" alt="Card image">
              <div class="card-body">
                <h4 class="card-title"><%= products[i].productName %></h4>
                <p class="card-text"><%= products[i].productDescription %></p>
                <p class="card-text">&#36;<%= useComma(products[i].productPrice) %></p>
                <section>
                  <p class="card-text">Likes : <%= products[i].likes %></p>

                  <a href="/admin/product/edit/<%= products[i]._id %>" class="btn btn-outline-info">EDIT</a>

                  <form action="/editLike/<%= products[i]._id %>?method=DELETE" method="POST">
                    <button type="submit" class="btn btn-outline-info indexPageButton" >DELETE</button>
                  </form>

                </section>
              </div>
            </div>
          </div>
          <% } %>
        </div>
    </main>
    }

<% } %>




<%- include('../partials/admin/footer.ejs') %>





    